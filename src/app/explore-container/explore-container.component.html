<!-- <ion-item style="border:1px solid yellow;"> -->
<style>
  table.cardSelector td,
  table.cardSelector td ion-thumbnail,
  table.cardSelector td img {
    border: 1px dashed #CCC;
    width: 75px;
    height: 75px;
    text-align: center;
    vertical-align: middle;
  }
</style>

<ion-modal [isOpen]="isModalOpen" (willDismiss)="onWillDismiss($event)">
  <ng-template>
    <ion-header>
      <ion-toolbar>
        <ion-buttons slot="start">
          <ion-button (click)="cancel()">Cancel</ion-button>
        </ion-buttons>
        <ion-title>Pick Replacement</ion-title>
        <!-- <ion-buttons slot="end">
          <ion-button (click)="confirm()" [strong]="true">Confirm</ion-button>
        </ion-buttons> -->
      </ion-toolbar>
    </ion-header>
    <ion-content class="ion-padding">
      <ion-card>
        <ion-card-content>
          <ion-grid>
            <ion-row>
              <ion-col *ngFor="let card of getBasicCards();" size="8" style="text-align: center; vertical-align: middle;">
                <!-- <ion-item lines="none" style="border:1px solid purple;" class="ion-no-margin ion-no-padding">
                  <ion-label position="stacked" class="ion-text-capitalize" style="width: 100%; border:1px solid blue; position: relative; top: -5px; display:block; text-align: center;">
                    <h1>{{ getCardDisplayName(card) }}</h1>
                  </ion-label>
                  <ion-item>
                    <a style="border:1px solid green; display:block; text-align: center;" href="#/tabs/tab1" (click)="confirm(card)">
                      <img src="/assets/icons/{{ card }}.png">
                    </a>
                  </ion-item>
                </ion-item> -->
                <table>
                  <tr>
                    <td>
                      <h2 (click)="confirm(card)">{{ getCardDisplayName(card) }}</h2>
                    </td>
                    </tr><tr>
                    <td>
                      <img (click)="confirm(card)" src="/assets/icons/{{ card }}.png">
                    </td>
                  </tr>
                </table>
              </ion-col>
            </ion-row>
          </ion-grid>
        </ion-card-content>
      </ion-card>
    </ion-content>
  </ng-template>
</ion-modal>

<ion-grid>
  <ion-row>
    <ion-col size="24">
      <table class="cardSelector">
        <tr>
          <td *ngFor="let card of deck; let index = index;">
            <a href="#/tabs/tab1" (click)="setCardByImage(true, index)">
              <ion-thumbnail size="large"><img src="/assets/icons/{{ getCardName(card) }}.png"></ion-thumbnail>
            </a>
          </td>
        </tr>
      </table>
    </ion-col>
  </ion-row>
  <ion-row>
    <ion-col size="8">
      <ion-item class="ion-no-padding">
        <ion-label position="stacked"><strong>Base Damage</strong></ion-label>

        <ion-text style="padding: 2px">{{ totalDamagePerSecond(false).newAttackDamage | number: '1.0-1' }} /
          hit</ion-text>
      </ion-item>
    </ion-col>
    <ion-col size="8">
      <ion-item class="ion-no-padding">
        <ion-label position="stacked"><strong>Attack Speed</strong></ion-label>

        <ion-text style="padding: 2px">{{ totalDamagePerSecond(false).newAttackSpeed | number }} / s</ion-text>
      </ion-item>
    </ion-col>
    <ion-col size="8">
      <ion-item class="ion-no-padding">
        <ion-label position="stacked"><strong>DPS</strong></ion-label>

        <ion-text style="padding: 2px">{{ totalDamagePerSecond(false).dmgPerSecond | number: '1.0-1' }} / s</ion-text>
      </ion-item>
    </ion-col>

    <ion-col size="8">
      <ion-item class="ion-no-padding">
        <ion-label position="stacked"><strong>Crit. Damage</strong></ion-label>

        <ion-text style="padding: 2px">{{ totalDamagePerSecond(false).criticalDamage | number: '1.0-1' }} /
          hit</ion-text>
      </ion-item>
    </ion-col>
    <ion-col size="8">
      <ion-item class="ion-no-padding">
        <ion-label position="stacked"><strong>Crit. Hits</strong></ion-label>

        <ion-text style="padding: 2px">{{ totalDamagePerSecond(false).critHitsPerSecond | number }} / s</ion-text>
      </ion-item>
    </ion-col>
    <ion-col size="8">
      <ion-item class="ion-no-padding">
        <ion-label position="stacked"><strong>Crit. DPS</strong></ion-label>

        <ion-text style="padding: 2px">{{ totalDamagePerSecond(false).critDmgPerSecond | number: '1.0-1' }} /
          s</ion-text>
      </ion-item>
    </ion-col>


    <ion-col size="6">
      <ion-item class="ion-no-padding">
        <ion-label position="stacked"><strong>Total DPS</strong></ion-label>

        <ion-text style="padding: 2px">{{ totalDamagePerSecond(false).total | number }}</ion-text>
      </ion-item>
    </ion-col>

    <ion-col *ngIf="deckConfig.talent == 'ronin' || deckConfig.talent == 'unity'">
      <ion-item class="ion-no-padding">
        <ion-label position="stacked"><strong>Max Hit
            Damage ({{getActiveTalentStat('damage')}}%)</strong></ion-label>

        <ion-text style="padding: 2px">{{ totalDamagePerSecond(true).total | number }}</ion-text>
      </ion-item>
    </ion-col>

    <ion-col *ngIf="deckConfig.talent == 'unity'">
      <ion-item class="ion-no-padding">
        <ion-label position="stacked"><strong>Damage x7</strong></ion-label>

        <ion-text style="padding: 2px">{{ totalDamagePerSecond(true).total * 7 | number }}</ion-text>
      </ion-item>
    </ion-col>

    <ion-col size="18" style="text-align: center;">
      <ion-item class="ion-no-margin ion-no-padding">
        <ion-text class="ion-no-margin ion-no-padding">
          <ion-chip size="xsmall" title="Damage Buff" color="primary">Dmg {{ totalDmgBuff(false) }}%</ion-chip>
          <ion-chip size="xsmall" title="Armor Destruction" color="secondary">Armor {{ totalArmorBuff() }}%</ion-chip>
          <ion-chip size="xsmall" title="Crit-Chance Buff" color="success">Crit {{ totalCritBuff(false) }}%</ion-chip>
          <ion-chip size="xsmall" title="Crit-Dmg Buff" color="tertiary">C.Dmg {{ totalCritDmgBuff(false) }}%</ion-chip>
          <ion-chip size="xsmall" title="Speed Buff" color="warning">Speed {{ totalSpeedBuff() }}%</ion-chip>
        </ion-text>
      </ion-item>
    </ion-col>
  </ion-row>
  <!-- <ion-row>
    <ion-col size-xs="3" size-sm="5">
      <ion-item class="ion-no-padding ion-no-margin">
        <ion-text><strong class="ion-hide-sm-down">Total </strong><strong>Buffs</strong></ion-text>
      </ion-item>
    </ion-col>
    <ion-col size-xs="21" size-sm="19" style="text-align: center;">
      <ion-item class="ion-no-padding ion-float-right">
        <ion-text>
          <ion-chip size="small" title="Damage Buff" color="primary">{{ totalDmgBuff() }}%</ion-chip>
          <ion-chip size="small" title="Armor Destruction" color="secondary">{{ totalArmorBuff() }}%</ion-chip>
          <ion-chip size="small" title="Crit-Chance Buff" color="success">{{ totalCritBuff() }}%</ion-chip>
          <ion-chip size="small" title="Crit-Dmg Buff" color="tertiary">{{ totalCritDmgBuff() }}%</ion-chip>
          <ion-chip size="small" title="Speed Buff" color="warning">{{ totalSpeedBuff() }}%</ion-chip>
        </ion-text>
      </ion-item>
    </ion-col>
  </ion-row>
  <ion-row>
    <ion-col size="6" size-xs="12">

      <ion-item class="ion-no-padding">
        <ion-label *ngIf="deckConfig.talent == 'none'"><strong>First Hit
            Damage</strong></ion-label>
        <ion-label *ngIf="deckConfig.talent == 'ronin' || deckConfig.talent == 'unity'"><strong>Max Hit
            Damage</strong></ion-label>
      </ion-item>
    </ion-col>
    <ion-col size="6" size-xs="12">
      <ion-item class="ion-no-padding">
        <ion-label>{{ totalDamagePerSecond(false) | number }}</ion-label>
      </ion-item>
    </ion-col>
    <ion-col size="12" size-xs="24" *ngIf="deckConfig.talent == 'unity'">
      <ion-item class="ion-no-padding">
        <ion-label><strong>Combined Damage (x7)</strong></ion-label>
        <ion-label>&nbsp;{{ totalDamagePerSecond(false) * 7 | number }}</ion-label>
      </ion-item>
    </ion-col>
  </ion-row> -->
  <ion-row>
    <ion-col size="24">
      <ion-card style="width: 98%; margin: 3px;">
        <ion-card-header style="text-align: left;">
          <ion-card-subtitle>

            <ion-thumbnail style="display: inline-block; height: 40px; vertical-align: middle;"><img
                src="/assets/icons/inquisitor.png"></ion-thumbnail>
            Inquisitor

          </ion-card-subtitle>
        </ion-card-header>
        <ion-card-content class="ion-no-margin ion-no-padding" style="padding:2px;">
          <table class="ion-no-margin ion-no-padding" style="width: 100%; display:block; margin:0; padding: 0;">
            <tr>
              <td>
                <ion-item lines="none" class="ion-no-margin">
                  <ion-label position="stacked">Level</ion-label>
                  <ion-select placeholder="Level 9-12" [value]="deckConfig.inquisCardLevel"
                    (ionChange)="changeInquisCard($event)">

                    <ion-select-option *ngFor="let level of levels;" [value]="level">{{ level }}</ion-select-option>

                  </ion-select>
                </ion-item>
              </td>
              <td>
                <ion-item lines="none" class="ion-no-margin ion-no-padding">
                  <ion-label position="stacked">Tier</ion-label>

                  <ion-select placeholder="Pick Tier" [value]="deckConfig.inquisTierLevel"
                    (ionChange)="changeInquisTier($event)">
                    <ion-select-option *ngFor="let tier of tiers;" [value]="tier">{{ tier }}</ion-select-option>
                  </ion-select>
                </ion-item>
              </td>
              <td>
                <ion-item lines="none" class="ion-no-margin ion-no-padding">
                  <ion-label position="stacked">Talent</ion-label>

                  <ion-select placeholder="Pick Talent" [value]="deckConfig.talent" (ionChange)="changeTalent($event)">
                    <ion-select-option value="none">none</ion-select-option>
                    <ion-select-option value="unity">Unity</ion-select-option>
                    <ion-select-option value="ronin">Ronin</ion-select-option>
                  </ion-select>
                </ion-item>
              </td>
              <td>
                <ion-item lines="none" class="ion-no-margin ion-no-padding">
                  <ion-label position="stacked">Absorbs</ion-label>
                  <ion-input [value]="deckConfig.absorbs" (ionChange)="changedSoulAbsorbs($event)"></ion-input>
                </ion-item>
              </td>
            </tr>
            <tr *ngIf="deckConfig.talent == 'ronin' || deckConfig.talent == 'unity'">
              <td colspan="4">
                <ion-grid>
                  <ion-row>
                    <ion-col size-sm="4" size-md="4" size-xs="8">
                      <ion-item class="ion-no-padding">
                        <ion-text color="primary" size="small"><i>Damage&nbsp;</i></ion-text>
                        <ion-input [value]="getActiveTalentStat('damage')"
                          (ionChange)="changeTalentStat($event, 'damage')"></ion-input>%
                      </ion-item>
                    </ion-col>
                    <ion-col size-sm="4" size-md="4" size-xs="8">
                      <ion-item class="ion-no-padding">
                        <ion-text color="success" size="small"><i>Chance&nbsp;</i></ion-text>
                        <ion-input [value]="getActiveTalentStat('critChance')"
                          (ionChange)="changeTalentStat($event, 'critChance')"></ion-input>%
                      </ion-item>
                    </ion-col>
                    <ion-col size-sm="4" size-md="4" size-xs="8">
                      <ion-item class="ion-no-padding">
                        <ion-text color="tertiary" size="small"><i>Crit-Dmg&nbsp;</i></ion-text>
                        <ion-input [value]="getActiveTalentStat('critDamage')"
                          (ionChange)="changeTalentStat($event, 'critDamage')"></ion-input>%
                      </ion-item>
                    </ion-col>
                  </ion-row>
                </ion-grid>
              </td>
            </tr>
            <tr>
              <td>
                <ion-item lines="none" class="ion-no-margin">
                  <ion-label position="stacked">Base Dmg</ion-label>
                  <ion-note>{{ getInquisBaseDamage() }}</ion-note>
                </ion-item>
              </td>
              <td>
                <ion-item lines="none" class="ion-no-margin">
                  <ion-label position="stacked">Base Speed</ion-label>
                  <ion-note>{{ inquisBaseSpeed }}</ion-note>
                </ion-item>
              </td>
              <td colspan="2">
                <ion-item lines="none" class="ion-no-margin">
                  <ion-label position="stacked">Dmg w. absorbs</ion-label>
                  <ion-note>{{ dmgWithAbsorbs() }}</ion-note>
                </ion-item>
              </td>
            </tr>
          </table>
        </ion-card-content>
      </ion-card>
    </ion-col>
  </ion-row>
  <ion-row class="ion-no-margin ion-no-padding">
    <ion-col size="24">
      <ion-item lines="none" class="ion-no-margin ion-no-padding">
        <ion-label class="ion-no-margin ion-no-padding">
          <h1 class="ion-no-margin ion-no-padding"><strong>Cards</strong></h1>
        </ion-label>
      </ion-item>
    </ion-col>
  </ion-row>
  <ion-row class="ion-no-margin ion-no-padding">
    <ion-col size="12" *ngFor="let card of deck; let index = index;" class="ion-no-margin ion-no-padding">
      <ion-card style="width: 98%; margin: 3px;">
        <ion-card-header style="text-align: left;" class="ion-no-padding">
          <ion-card-subtitle>
            <a href="#/tabs/tab1" (click)="setCardByImage(true, index)">
              <ion-thumbnail style="display: inline-block; height: 45px; vertical-align: middle;"><img
                  src="/assets/icons/{{ getCardName(card) }}.png"></ion-thumbnail>

            </a>&nbsp;{{ getCardDisplayName(card) }}
          </ion-card-subtitle>
        </ion-card-header>
        <ion-card-content class="ion-no-margin ion-no-padding" style="padding:2px;">
          <table class="ion-no-margin ion-no-padding" style="width: 100%; display:block; margin:0; padding: 0;">
            <tr>
              <td>
                <ion-item lines="none">
                  <ion-label position="stacked">Level</ion-label>
                  <ion-select placeholder="Level 9-12" [value]="card.level" (ionChange)="changeCardLevel($event, card)">

                    <ion-select-option *ngFor="let level of levels;" [value]="level">{{ level }}</ion-select-option>

                  </ion-select>
                </ion-item>
              </td>
              <td>
                <ion-item class="ion-no-margin ion-no-padding" lines="none">
                  <ion-label position="stacked">Tier</ion-label>
                  <ion-select placeholder="Tier 4-7" [value]="card.tier" (ionChange)="changeTierLevel($event, card)">
                    <ion-select-option *ngFor="let tier of tiers;" [value]="tier">{{ tier }}</ion-select-option>
                  </ion-select>
                </ion-item>
              </td>
            </tr>
            <tr *ngIf="card.name == 'witch_statue'">
              <td colspan="2">
                <ion-item lines="none">
                  <ion-label position="stacked">Merges</ion-label>
                  <ion-select placeholder="Merges" [value]="card.merges" (ionChange)="changeWitchMerges($event, card)">
                    <ion-select-option *ngFor="let merge of witchMerges;" [value]="merge">{{ merge
                      }}</ion-select-option>
                  </ion-select>
                </ion-item>
              </td>
            </tr>
            <tr>
              <td colspan="2">
                <ion-item class="ion-no-padding ion-no-margin" lines="none">
                  <span *ngIf="getDmgBuff(card) > 0 && (getUnitType(card) == 'unit' || getUnitType(card) == 'armor')">
                    <ion-chip size="xsmall" [color]="getUnitType(card) == 'unit' ? 'primary' : 'secondary'"
                      title="Dmg Buff">Dmg {{ getDmgBuff(card)
                      }}%</ion-chip>
                  </span>
                  <span *ngIf="getUnitType(card) == 'flat'">
                    <ion-chip size="xsmall" color="danger" title="Dmg Buff">Dmg {{ getDmgBuff(card)
                      }}&nbsp;pts</ion-chip>
                  </span>
                  &nbsp;<ion-chip size="xsmall" color="success" title="Crit Buff"
                    *ngIf="getCritBuff(card) > 0">Crit&nbsp;{{ getCritBuff(card) }}%</ion-chip>

                  <ion-chip size="xsmall" color="warning" title="Speed Buff" *ngIf="getSpeedBuff(card) > 0">Spd&nbsp;{{
                    getSpeedBuff(card) }}%</ion-chip>

                </ion-item>
              </td>
            </tr>
          </table>
        </ion-card-content>
      </ion-card>
    </ion-col>
  </ion-row>
  <ion-row class="ion-no-margin ion-no-padding">
    <ion-col size="24" class="ion-no-margin ion-no-padding">
      <ion-card style="width: 98%; margin: 3px;">
        <ion-card-content class="ion-no-margin ion-no-padding" style="padding:2px;">
          <table class="ion-no-margin ion-no-padding" style="width: 100%; display:block; margin:0; padding: 0;">
            <tr>
              <td style="width: 60%;">
                <ion-item lines="none">
                  <ion-label position="stacked">Pick Hero</ion-label>
                  <ion-select placeholder="Pick Hero" style="width: 100%;" [value]="deckConfig.hero" (ionChange)="changeHero($event)">
                    <ion-select-option *ngFor="let hero of heroList();" [value]="hero" class="ion-text-capitalize">{{ hero }}</ion-select-option>
                  </ion-select>
                </ion-item>
              </td>
              <td style="width: 40%;">
                <ion-item lines="none" *ngIf="deckConfig.hero == 'gadget'">
                  <ion-label>Gold Tile</ion-label>
                  &nbsp;<ion-checkbox *ngIf="deckConfig.hero == 'gadget'" class="ion-no-padding ion-no-margin" size="small"
                  [checked]="heroes[deckConfig.hero].isGold" (ionChange)="changeGoldTile($event)"></ion-checkbox>

                </ion-item>
              </td>
            </tr>
            <tr>
              <td colspan="2">
                <ion-item lines="none">
                  <ion-grid>
                    <ion-row>
                      <ion-col size="8">
                        <ion-item class="ion-no-padding">
                          <ion-label position="stacked">Damage</ion-label>
                          <ion-text>
                            <ion-input [value]="heroes[deckConfig.hero].damage"
                              (ionChange)="changeHeroStat($event,'damage')"></ion-input>
                          </ion-text>
                        </ion-item>
                      </ion-col>
                      <ion-col size="8">
                        <ion-item class="ion-no-padding">
                          <ion-label position="stacked">Crit</ion-label>
                          <ion-text>
                            <ion-input [value]="heroes[deckConfig.hero].crit" (ionChange)="changeHeroStat($event,'crit')"></ion-input>
                          </ion-text>
                        </ion-item>
                      </ion-col>
                      <ion-col size="8">
                        <ion-item class="ion-no-padding">
                          <ion-label position="stacked">Speed</ion-label>
                          <ion-text>
                            <ion-input [value]="heroes[deckConfig.hero].speed" (ionChange)="changeHeroStat($event,'speed')"></ion-input>
                          </ion-text>
                        </ion-item>
                      </ion-col>
                    </ion-row>
                  </ion-grid>
                </ion-item>
              </td>
            </tr>
          </table>
        </ion-card-content>
      </ion-card>
    </ion-col>
  </ion-row>
  <ion-row class="ion-no-margin ion-no-padding">
    <ion-col size="12" class="ion-no-margin ion-no-padding">
      <ion-card style="width: 98%; margin: 3px;">
        <ion-card-content class="ion-no-margin ion-no-padding" style="padding:2px;">
          <table class="ion-no-margin ion-no-padding" style="width: 100%; display:block; margin:0; padding: 0;">
            <tr>
              <td>
                <ion-item lines="none" class="ion-no-margin ion-no-padding" style="padding-left:4px">
                  <ion-label position="stacked">Amulet</ion-label>
                  <ion-select placeholder="Pick Amulet" [value]="deckConfig.amulet" (ionChange)="changeAmulet($event)">
                    <ion-select-option *ngFor="let amulet of amuletList();" [value]="amulet">{{ amulets[amulet].name }}</ion-select-option>
                  </ion-select>
                </ion-item>
              </td>
              <td>
                <ion-item lines="none" class="ion-no-margin ion-no-padding">
                  <ion-label position="stacked" class="ion-text-capitalize">{{ amulets[deckConfig.amulet].stat }} %</ion-label>
                  <ion-input [value]="amulets[deckConfig.amulet][amulets[deckConfig.amulet].stat]"
          (ionChange)="changeAmuletStat($event)"></ion-input>
                </ion-item>
              </td>
            </tr>
          </table>
        </ion-card-content>
      </ion-card>
    </ion-col>
    <ion-col size="12" class="ion-no-margin ion-no-padding">
      <ion-card style="width: 98%; margin: 3px;">
        <ion-card-content class="ion-no-margin ion-no-padding" style="padding:2px;">
          <table class="ion-no-margin ion-no-padding" style="width: 100%; display:block; margin:0; padding: 0;">
            <tr>
              <td>
                <ion-item lines="none" class="ion-no-margin">
                  <ion-label position="stacked">Weapon</ion-label>
                  <ion-select placeholder="Pick Weapon" [value]="deckConfig.weapon" (ionChange)="changeWeapon($event)">
                    <ion-select-option *ngFor="let weapon of weaponList();" [value]="weapon">{{ weapon }}</ion-select-option>
          
                  </ion-select>
                </ion-item>
              </td>
              <td>
                <ion-item lines="none" class="ion-no-margin">
                  <ion-label position="stacked" class="ion-text-capitalize">{{ weapons[deckConfig.weapon].stat }} %</ion-label>
                  
                  <ion-input [value]="weapons[deckConfig.weapon][weapons[deckConfig.weapon].stat]"
                    (ionChange)="changeWeaponStat($event)"></ion-input>
                </ion-item>
              </td>
            </tr>
          </table>
        </ion-card-content>
      </ion-card>
    </ion-col>
  </ion-row>
  <ion-row>
    <ion-col size="8">
      <ion-item>
        <ion-label>
          Set Bonus
        </ion-label>
      </ion-item>
    </ion-col>
    <ion-col size="16">
      <ion-item class="ion-no-padding">
        <ion-checkbox slot="start" class="ion-no-padding ion-no-margin" size="small" [checked]="deckConfig.hasSetBonus"
          (ionChange)="changeSetBonus($event)"></ion-checkbox>
        <ion-text>&nbsp;<i>10%+</i></ion-text>
      </ion-item>
    </ion-col>
  </ion-row>
</ion-grid>
<!-- </ion-item> -->